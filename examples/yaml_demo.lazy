YAML = import "YAML"

parsed_int = YAML.parse "42"
parsed_array = YAML.parse "[1, 2, 3]"

yaml_int = YAML.encode 42
yaml_config = YAML.encode { name: "MyApp", version: "1.0.0" }

port = when YAML.parse "port: 8080" matches
  (#ok, config) then config.port
  otherwise 3000

{
  parsed: { int: parsed_int, array: parsed_array },
  encoded: { int: yaml_int, config: yaml_config },
  port: port
}
